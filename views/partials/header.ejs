<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/styles.css?v=1.0">
    <title>Prep Ingredients</title>
</head>
<body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-body-tertiary w-100">
        <div class="container-fluid">
            <a class="navbar-brand" href="/"><img src="https://dcf196gsozjg8.cloudfront.net/logo.png" alt="Home" style="height: 50px;"></a>
            <div class="d-flex justify-content-end">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <button class="btn btn-primary ms-3" onclick="openDialog()">
                            ➕ Add
                        </button>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Sort By
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="/sortByMeat">🥩 肉</a></li>
                            <li><a class="dropdown-item" href="/sortByVeg">🥬 青菜</a></li>
                            <li><a class="dropdown-item" href="/sortByBall">🍢 丸子</a></li>
                            <li><a class="dropdown-item" href="/sortBySeafood">🐟 海鲜</a></li>
                            <li><a class="dropdown-item" href="/sortByFungi">🍄 菌类</a></li>
                            <li><a class="dropdown-item" href="/sortByBean">🫘 豆制品</a></li>
                            <li><a class="dropdown-item" href="/sortByNoodle">🍜 主食</a></li>
                            <li><a class="dropdown-item" href="/sortBySauce">🥣 小料</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Dialog Box -->
    <div id="dialog-box" class="modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add New Ingredient</h5>
                    <button type="button" class="btn-close" onclick="closeDialog()"></button>
                </div>
                <div class="modal-body">
                    <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
                        <!-- Text Input -->
                        <div class="mb-3">
                            <label for="ingredient-name" class="form-label">Ingredient Name</label>
                            <input type="text" class="form-control" id="ingredient-name" name="name" required>
                        </div>
                        <!-- Image Input -->
                        <div class="mb-3">
                            <label for="file-input" class="form-label">Upload Image</label>
                            <input type="file" class="form-control" id="file-input" name="file" accept="image/*" required>
                        </div>
                        <!-- Category Selection -->
                        <div class="d-flex flex-wrap justify-content-between mb-3">
                            <button type="button" class="btn btn-outline-primary" onclick="setCategory('meat')">🥩 肉</button>
                            <button type="button" class="btn btn-outline-success" onclick="setCategory('veg')">🥬 青菜</button>
                            <button type="button" class="btn btn-outline-secondary" onclick="setCategory('ball')">🍢 丸子</button>
                            <button type="button" class="btn btn-outline-info" onclick="setCategory('seafood')">🐟 海鲜</button>
                            <button type="button" class="btn btn-outline-warning" onclick="setCategory('fungi')">🍄 菌类</button>
                            <button type="button" class="btn btn-outline-dark" onclick="setCategory('bean')">🫘 豆制品</button>
                            <button type="button" class="btn btn-outline-danger" onclick="setCategory('noodle')">🍜 主食</button>
                            <button type="button" class="btn btn-outline-danger" onclick="setCategory('sauce')">🥣 小料</button>
                        </div>
                        <!-- Submit Buttons -->
                        <div class="d-flex justify-content-between">
                            <button type="button" class="btn btn-outline-primary w-50 me-1" onclick="submitForm('meat')">Submit as 🥩 Meat</button>
                            <button type="button" class="btn btn-outline-success w-50 ms-1" onclick="submitForm('veg')">Submit as 🥬 Veg</button>
                        </div>
                        <!-- Hidden Input for Category -->
                        <input type="hidden" id="category-input" name="category">
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Function to open the dialog
        function openDialog() {
            const dialog = document.getElementById('dialog-box');
            dialog.style.display = 'block';
        }
    
        // Function to close the dialog
        function closeDialog() {
            const dialog = document.getElementById('dialog-box');
            dialog.style.display = 'none';
        }
    
        // Function to set the category value
        function setCategory(category) {
            const categoryInput = document.getElementById('category-input');
            categoryInput.value = category;
            alert(`Category set to: ${category}`); // Optional visual feedback
        }
    
        // Function to submit the form with meat/veg classification
        function submitForm(prepSide) {
            const form = document.getElementById('upload-form');
            const input = document.createElement('input');
            input.type = 'hidden';
            input.name = 'prep_side';
            input.value = prepSide; // 'meat' or 'veg'
            form.appendChild(input);
            form.submit();
        }
    </script>

    